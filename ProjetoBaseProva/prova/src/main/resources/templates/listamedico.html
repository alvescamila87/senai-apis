<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Lista de Médicos</title>

        <!-- Adicione os links para os arquivos CSS do Bootstrap 5 -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    </head>
    <body>
        
        <!-- Barra de navegação -->
        <nav class="navbar navbar-expand-md navbar-dark .navbar.navbar-default.navbar-static-top bg-dark">      
            <!-- Logo/marca principal da barra -->
            <a class="navbar-brand mb-0 h1 ms-5 me-5" href="#">S E N A I</a>

            <form class="d-flex ms-5 me-5" th:action="@{/login?logout}" th:method="get">
                <button class="btn btn btn-outline-light my-2 my-sm-0 justify-content-end" type="submit">Logout</button>
            </form>
        </nav>    
        <!-- Fim barra de navegação -->
        
        <!-- Conteúdo principal -->
        <div class="container mt-3">


            <div th:if="${erro}" class="alert alert-danger" role="alert">
                <span class="mensagem" th:text="${erro}">Erro</span>
            </div>

            <div th:if="${param.sucesso}" class="alert alert-success mt-3" role="alert">
                <span class="mensagem">Médico cadastrado/alterado com sucesso!</span>
            </div>


            <!-- DataTales Example -->
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Lista de Médicos</h6>
                </div>

                <div class="card-body">
                    
                    <!-- Botão para redirecionar o pagina para o cadastro do usuario
                         Irá acessar a url /cadastrarusuario com o formulário em branco
                    -->
                    <p class="card-text">
                        <a th:href="@{~/cadastramedico}" class="btn btn-primary">Inserir</a>
                    </p>

                    
                    <!-- Inicio do HTML da TABELA com os dados -->
                    <div class="table-responsive">
                        <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                            <!-- Inicio do HTML do título da TABELA -->
                            <thead>
                                <tr>
                                    <th style="white-space: nowrap;"></th>
                                    <th style="white-space: nowrap;"></th>
                                    <th>Id</th>
                                    <th>Médico</th>
                                    <th>Especialidade</th>
                                </tr>
                            </thead>
                            
                            <!-- Inicio do HTML dos dados TABELA -->
                            <tbody>
                                
                                <!-- Objeto que irá conter uma lista de usuários
                                    Essa lista precisa ter os atributos das colunas
                                -->
                                <tr th:each="medico: ${listaMedicosDTO}">

                                    <td><a th:href="@{'/atualizarmedico/' + ${medico.id}}" class="btn btn-warning">Alterar</a></td>
                                    
                                    <td><button id="excluirMedico" type="button" th:data-medico-id="${medico.id}" class="excluir btn btn-danger">Excluir</button></td>
                                    
                                    <!-- Atributos da tabela Dto = ( id, nome, email, telefone ) -->
                                    <td th:text="${medico.id}"></td>
                                    <td th:text="${medico.nome}"></td>
                                    <td th:text="${medico.especialidade}"></td>

                                </tr>
                                
                            </tbody>                       
                        </table>
                        <!-- Vincular o arquivo JavaScript externo -->
                        <script th:src="@{/excluirmedico.js}"></script>
                        
                    </div>
                </div>
            </div> 
        </div>
        <!-- Fim conteúdo principal -->
        
        <!-- Rodapé -->
        <footer class="container">
          <p>© Turma 2022-2023</p>
        </footer>
        <!-- Fim Rodapé -->
        
   </body>
</html>
